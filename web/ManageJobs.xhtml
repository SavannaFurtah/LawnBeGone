<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Manage Jobs</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
        <link href="css/bootstrap.min.css" rel="stylesheet" />
        <link href="css/bootstrap-theme.css" rel="stylesheet" />
        <link href="css/projectStyling.css" rel="stylesheet" />
        <script src="http://code.jquery.com/jquery.min.js"></script>
    </h:head>
    <h:body>
        <ui:composition template="PageTemplate.xhtml">
            <ui:define name="pageTitle">
                <title>Manage Jobs</title>
            </ui:define>
            <ui:define name="content">
                <div class="container">
                    <h:form class="table1">
                        <h2 class="form-signin-heading"> Home Owner Jobs </h2>
                        <h:dataTable class="table" value="#{jobData.filterJobListByOwner(userData.currentUser.id)}" var="j">
                            <h:column>
                                <f:facet name="header">Title</f:facet>
                                    #{j.title}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Pay</f:facet>
                                    #{j.pay}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Description</f:facet>
                                    #{j.description}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Postal Code</f:facet>
                                    #{userList.getById(j.ownerId).postalCode}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Status</f:facet>
                                    #{j.status}
                            </h:column>

                            <h:column>
                                <h:commandButton action="#{jobData.deleteJob(j.id)}" value="Delete" ></h:commandButton>
                            </h:column>
                            <h:column>
                                <h:commandButton action="#{jobData.editViewJob(j, j.ownerId)}" value="Edit" ></h:commandButton>
                            </h:column>

                        </h:dataTable>
                    </h:form>

                    <h:form class="table1">
                        <h2 class="form-signin-heading"> Lawn Cutter Jobs </h2>
                        <h:dataTable class="table" value="#{jobData.filterJobListByCutter(userData.currentUser.id)}" var="j2">
                            <h:column>
                                <f:facet name="header">Title</f:facet>
                                    #{j2.title}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Pay</f:facet>
                                    #{j2.pay}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Description</f:facet>
                                    #{j2.description}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Postal Code</f:facet>
                                    #{userList.getById(j2.cutterId).postalCode}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Status</f:facet>
                                    #{j2.status}
                            </h:column>

                            <h:column>
                                <h:commandButton action="#{jobData.removeCutterFromJob(j2.id)}" value="Delete" ></h:commandButton>
                            </h:column>

                        </h:dataTable>
                    </h:form>     
                </div>
            </ui:define>
        </ui:composition>


    </h:body>
</html>

